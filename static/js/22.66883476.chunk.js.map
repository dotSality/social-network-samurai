{"version":3,"file":"static/js/22.66883476.chunk.js","mappings":"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","sources":["webpack://social-network/./src/Components/Users/Users.module.css?d486","Components/Users/Pagination.tsx","Components/Users/User.tsx","bll/selectors.ts","Components/Users/Users.tsx","HOC/WithAuthRedirect.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"userPhoto\":\"Users_userPhoto__kAiB8\",\"selected\":\"Users_selected__4-ibJ\"};","import s from './Users.module.css';\r\nimport React from 'react';\r\n\r\ntype PropsType = {\r\n    onPageChanged: (i: number, pageSize: number) => void,\r\n    currentPage: number,\r\n    totalUsersCount: number,\r\n    pageSize: number,\r\n}\r\n\r\n\r\nexport const Pagination = ({currentPage, onPageChanged, totalUsersCount, pageSize}: PropsType) => {\r\n\r\n    const pages = []\r\n    const prevTwoPages = () => onPageChanged(currentPage - 2, pageSize)\r\n    const nextTwoPages = () => onPageChanged(currentPage + 2, pageSize)\r\n    const onFirstPageChange = () => onPageChanged(1, pageSize)\r\n    const onLastPageChange = () => onPageChanged(pagesCount, pageSize)\r\n\r\n    const pagesCount = Math.ceil(totalUsersCount / pageSize)\r\n\r\n    if (currentPage <= 4) {\r\n        for (let i = 1; i <= 5; i++) {\r\n            pages.push(i)\r\n        }\r\n        return <div>\r\n            {pages.map(i => <button key={i} onClick={() => onPageChanged(i, pageSize)}\r\n                className={currentPage === i ? s.selected : ''}>{i}</button>)\r\n            }\r\n            <button onClick={nextTwoPages}>»</button>\r\n            <button onClick={onLastPageChange}>...</button>\r\n        </div>\r\n    } else if (currentPage >= 4 && currentPage <= pagesCount - 4) {\r\n        for (let i = currentPage - 1; i <= currentPage + 1; i++) {\r\n            pages.push(i)\r\n        }\r\n        return <div>\r\n            <button onClick={onFirstPageChange}>{1}</button>\r\n            <button onClick={prevTwoPages}>«</button>\r\n            {pages.map(i => <button key={i} onClick={() => onPageChanged(i, pageSize)}\r\n                className={currentPage === i ? s.selected : ''}>{i}</button>)\r\n            }\r\n            <button onClick={nextTwoPages}>»</button>\r\n            <button onClick={onLastPageChange}>...</button>\r\n        </div>\r\n    } else {\r\n        for (let i = pagesCount - 4; i <= pagesCount; i++) {\r\n            pages.push(i)\r\n        }\r\n        return <div>\r\n            <button onClick={onFirstPageChange}>{1}</button>\r\n            <button onClick={prevTwoPages}>«</button>\r\n            {pages.map(i => <button key={i} onClick={() => onPageChanged(i, pageSize)}\r\n                className={currentPage === i ? s.selected : ''}>{i}</button>)\r\n            }\r\n        </div>\r\n    }\r\n}","import {NavLink} from 'react-router-dom';\r\nimport userPhoto from '../../common/Img/default-user.jpg';\r\nimport s from './Users.module.css';\r\nimport React from 'react';\r\nimport {toggleFollow, UserType} from '../../bll/users-reducer';\r\nimport {useAppDispatch, useAppSelector} from '../../bll/hooks';\r\n\r\n\r\ntype UserPropsType = {\r\n    u: UserType\r\n}\r\n\r\nexport const User = ({u}: UserPropsType) => {\r\n\r\n    const dispatch = useAppDispatch()\r\n    const {isFollowing} = useAppSelector(state => state.usersPage)\r\n    const toggleFollowHandler = () => dispatch(toggleFollow({userID: u.id, isFollowed: u.followed}))\r\n\r\n    return (\r\n        <div>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={'/profile/' + u.id}>\r\n                        <img src={u.photos.small ? u.photos.small : userPhoto} className={s.userPhoto} alt={'user face'}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    <button disabled={isFollowing.some(id => id === u.id)}\r\n                        onClick={toggleFollowHandler}>{!u.followed ? 'Follow' : 'Unfollow'}</button>\r\n                </div>\r\n            </span>\r\n            <span>\r\n                <span>\r\n                    <div>{u.name}</div>\r\n                    <div>{u.status}</div>\r\n                </span>\r\n            </span>\r\n        </div>\r\n    )\r\n}","import {RootStateType} from './store';\r\n\r\nexport const usersData = (state: RootStateType) => state.usersPage\r\n\r\n","import React, {useEffect} from 'react';\r\nimport {requestUsers, setCurrentPage} from '../../bll/users-reducer';\r\nimport {Pagination} from './Pagination';\r\nimport {User} from './User';\r\nimport {useAppDispatch, useAppSelector} from '../../bll/hooks';\r\nimport {usersData} from '../../bll/selectors';\r\nimport {WithAuthRedirect} from '../../HOC/WithAuthRedirect';\r\n\r\n\r\nexport default WithAuthRedirect(() => {\r\n    const {totalUsersCount, pageSize, currentPage} = useAppSelector(usersData)\r\n    const {users} = useAppSelector(usersData)\r\n\r\n    const dispatch = useAppDispatch()\r\n    useEffect(() => {\r\n        dispatch(requestUsers({currentPage, pageSize}))\r\n    }, [])\r\n\r\n    const onPageChanged = (currentPage: number, pageSize: number) => {\r\n        dispatch(setCurrentPage(currentPage));\r\n        dispatch(requestUsers({currentPage, pageSize}));\r\n    }\r\n\r\n    return <div>\r\n        <Pagination\r\n            pageSize={pageSize}\r\n            currentPage={currentPage}\r\n            totalUsersCount={totalUsersCount}\r\n            onPageChanged={onPageChanged}\r\n        />\r\n        {users.map(u => <User key={u.id} u={u}/>)}\r\n    </div>\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {FC} from 'react';\r\nimport {Navigate} from 'react-router-dom';\r\nimport {useAppSelector} from '../bll/hooks';\r\n\r\nexport function WithAuthRedirect<T>(Component: FC<T>) {\r\n    function RedirectComponent(props: T) {\r\n        const {isAuth} = useAppSelector(state => state.auth)\r\n        if (!isAuth) return <Navigate to={'/login'}/>\r\n        return <Component {...props}/>\r\n    }\r\n    return RedirectComponent;\r\n}"],"names":["Pagination","currentPage","onPageChanged","totalUsersCount","pageSize","pages","prevTwoPages","nextTwoPages","onFirstPageChange","onLastPageChange","pagesCount","Math","ceil","i","push","map","onClick","className","s","User","u","dispatch","useAppDispatch","isFollowing","useAppSelector","state","usersPage","to","id","src","photos","small","userPhoto","alt","disabled","some","toggleFollow","userID","isFollowed","followed","name","status","usersData","WithAuthRedirect","users","useEffect","requestUsers","setCurrentPage","Component","props","auth","isAuth"],"sourceRoot":""}