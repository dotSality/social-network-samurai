{"version":3,"file":"static/js/165.179df9dd.chunk.js","mappings":"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","sources":["Components/CommonUI/CommonButton/CommonButton.tsx","webpack://social-network/./src/Components/InnerPreloader/InnerPreloader.module.scss?1560","Components/InnerPreloader/InnerPreloader.tsx","bll/selectors.ts","webpack://social-network/./src/Components/Users/Users.module.scss?5c93","webpack://social-network/./src/common/styles/Common.module.scss?6fdd","webpack://social-network/./src/Components/Users/UsersList/UsersList.module.scss?dd2b","webpack://social-network/./src/Components/Users/UserItem/UserItem.module.scss?67fd","Components/Users/UserItem/UserItem.tsx","Components/Users/UsersList/UsersList.tsx","webpack://social-network/./src/Components/Users/SortSelect/SortSelect.module.scss?d899","Components/Users/SortSelect/SortSelect.tsx","Components/Users/Users.tsx","hooks/useStickyRef.ts","hooks/useDebounceValue.ts","HOC/WithAuthRedirect.tsx"],"sourcesContent":["import { Button, ButtonProps } from 'antd';\r\nimport { ReactNode } from 'react';\r\n\r\ninterface IButton extends ButtonProps {\r\n  children?: ReactNode;\r\n}\r\n\r\nconst CommonButton = ({ children, ...restProps }: IButton) => {\r\n  return (\r\n    <Button {...restProps}>\r\n      {children}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default CommonButton;","// extracted by mini-css-extract-plugin\nexport default {\"loader\":\"InnerPreloader_loader__oQesM\",\"spinner\":\"InnerPreloader_spinner__BuUeX\"};","import s from './InnerPreloader.module.scss';\r\nimport innerLoader from '../../common/Img/inner-loader.gif';\r\nimport React from 'react';\r\n\r\nexport const InnerPreloader = () => {\r\n  return <div className={s.loader}>\r\n    <div className={s.spinner}>\r\n      <img src={innerLoader} alt=\"loader\"/>\r\n    </div>\r\n  </div>;\r\n};","import {RootStateType} from './store';\r\n\r\nexport const usersData = (state: RootStateType) => state.usersPage\r\n\r\n","// extracted by mini-css-extract-plugin\nexport default {\"main\":\"Users_main__8unNb\",\"scrolled\":\"Users_scrolled__gaddN\",\"filterBlock\":\"Users_filterBlock__xwBUO\",\"searchInput\":\"Users_searchInput__eheGv\",\"info\":\"Users_info__F+yWf\",\"disable\":\"Users_disable__A7cZW\"};","// extracted by mini-css-extract-plugin\nexport default {\"textBlock\":\"Common_textBlock__Vf9YP\",\"textArea\":\"Common_textArea__6U1wQ\",\"error\":\"Common_error__aD7lO\",\"container\":\"Common_container__DxjoE\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"UsersList_content__Gi9yT\",\"scrolled\":\"UsersList_scrolled__+7AoE\"};","// extracted by mini-css-extract-plugin\nexport default {\"itemContainer\":\"UserItem_itemContainer__StxbI\",\"data\":\"UserItem_data__v7DJ-\",\"name\":\"UserItem_name__Ri7y0\",\"status\":\"UserItem_status__ZzF1O\",\"link\":\"UserItem_link__xBQcB\",\"userPhoto\":\"UserItem_userPhoto__3DbYD\",\"button\":\"UserItem_button__csZjr\"};","import { NavLink } from 'react-router-dom';\r\nimport userPhoto from '../../../common/Img/default-user.jpg';\r\nimport s from './UserItem.module.scss';\r\nimport React from 'react';\r\nimport { toggleFollow, UserType } from '../../../bll/users-reducer';\r\nimport { useAppDispatch, useAppSelector } from '../../../bll/hooks';\r\nimport CommonButton from '../../CommonUI/CommonButton/CommonButton';\r\n\r\ntype UserPropsType = {\r\n  u: UserType\r\n}\r\n\r\nexport const UserItem = ({ u }: UserPropsType) => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const { isFollowing } = useAppSelector(state => state.usersPage);\r\n  const toggleFollowHandler = () => dispatch(toggleFollow({ userID: u.id, isFollowed: u.followed }));\r\n\r\n  const isLoading = isFollowing.some(id => id === u.id);\r\n\r\n  return (\r\n    <div className={s.itemContainer}>\r\n      <NavLink className={s.link} to={'/profile/' + u.id}>\r\n        <img src={u.photos.small ? u.photos.small : userPhoto} className={s.userPhoto} alt={'user face'}/>\r\n      </NavLink>\r\n      <div className={s.data}>\r\n        <span className={s.name}>\r\n          <NavLink className={s.link} to={'/profile/' + u.id}>\r\n            {u.name}\r\n          </NavLink>\r\n        </span>\r\n        {u.status && <span className={s.status}>{u.status}</span>}\r\n      </div>\r\n      <CommonButton\r\n        className={s.button}\r\n        disabled={isLoading}\r\n        loading={isLoading}\r\n        onClick={toggleFollowHandler}\r\n      >\r\n        {!u.followed ? 'Follow' : 'Unfollow'}\r\n      </CommonButton>\r\n    </div>\r\n  );\r\n};","import s from './UsersList.module.scss';\r\nimport { InnerPreloader } from '../../InnerPreloader/InnerPreloader';\r\nimport { UserItem } from '../UserItem/UserItem';\r\nimport React, { memo } from 'react';\r\nimport { useAppSelector } from '../../../bll/hooks';\r\nimport { usersData } from '../../../bll/selectors';\r\n\r\nexport const UsersList = memo(() => {\r\n  const { users, isFetching } = useAppSelector(usersData);\r\n\r\n  return (\r\n    <div className={s.content}>\r\n      {isFetching && <InnerPreloader/>}\r\n      {users.map(u => <UserItem key={u.id} u={u}/>)}\r\n    </div>\r\n  );\r\n});","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"SortSelect_select__ew3PU\"};","import React from 'react';\r\nimport { Select } from 'antd';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport s from './SortSelect.module.scss';\r\nimport { CaretDownOutlined } from '@ant-design/icons';\r\n\r\nconst pageSizeFilterValues: number[] = [3, 5, 7, 10, 20];\r\n\r\nexport const SortSelect = () => {\r\n  const [search, setParams] = useSearchParams();\r\n\r\n  const count = Number(search.get('count')) || 10;\r\n\r\n  const onSelectChange = (value: number) => {\r\n    search.set('count', String(value));\r\n    setParams(search);\r\n  };\r\n\r\n  const selectOptions = pageSizeFilterValues.map((size) => ({ value: size, label: size }));\r\n\r\n  return <Select\r\n    className={s.select}\r\n    suffixIcon={<CaretDownOutlined/>}\r\n    defaultValue={count || 10}\r\n    onChange={onSelectChange}\r\n    options={selectOptions}\r\n  />;\r\n};","import React, { ChangeEvent, memo, useEffect, useState } from 'react';\r\nimport { clearUsersData, fetchUsers } from '../../bll/users-reducer';\r\nimport { useAppDispatch, useAppSelector } from '../../bll/hooks';\r\nimport { usersData } from '../../bll/selectors';\r\nimport { WithAuthRedirect } from '../../HOC/WithAuthRedirect';\r\nimport s from './Users.module.scss';\r\nimport c from '../../common/styles/Common.module.scss';\r\nimport { UsersList } from './UsersList/UsersList';\r\nimport { SortSelect } from './SortSelect/SortSelect';\r\nimport { useStickyRef } from '../../hooks/useStickyRef';\r\nimport { useDebounceValue } from '../../hooks/useDebounceValue';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { Input, Pagination } from 'antd';\r\n\r\nexport default WithAuthRedirect(memo(() => {\r\n  const { totalUsersCount } = useAppSelector(usersData);\r\n\r\n  const [search, setParams] = useSearchParams();\r\n\r\n  const currentPage = Number(search.get('page')) || 1;\r\n\r\n  const pageSize = Number(search.get('count')) || 10;\r\n\r\n  const { stickyRef, isSticky } = useStickyRef();\r\n\r\n  const [term, setTerm] = useState('');\r\n\r\n  const onTempChange = (e: ChangeEvent<HTMLInputElement>) => setTerm(e.currentTarget.value);\r\n\r\n  const debouncedValue = useDebounceValue<string>(term, 1500);\r\n\r\n  useEffect(() => {\r\n    if (term.trim()) {\r\n      search.set('term', term);\r\n      setParams(search);\r\n    } else {\r\n      search.delete('term');\r\n      setParams(search);\r\n    }\r\n  }, [debouncedValue]);\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchUsers({ currentPage, pageSize, term }));\r\n  }, [currentPage, debouncedValue, dispatch, pageSize]);\r\n\r\n  useEffect(() => () => {\r\n    dispatch(clearUsersData());\r\n  }, [dispatch]);\r\n\r\n  const onPageChanged = (currentPage: number) => {\r\n    search.set('page', String(currentPage));\r\n    setParams(search);\r\n  };\r\n\r\n  return <div className={`${c.container} ${s.main}`}>\r\n    <div className={s.info}>\r\n      <span>\r\n        All users: {totalUsersCount}\r\n      </span>\r\n    </div>\r\n    <div ref={stickyRef} className={`${s.filterBlock} ${isSticky ? s.scrolled : ''}`}>\r\n      <Input placeholder=\"Enter name...\" className={s.searchInput} value={term} onChange={onTempChange} type=\"text\"/>\r\n      {!!totalUsersCount &&\r\n        <Pagination\r\n          showLessItems\r\n          showSizeChanger={false}\r\n          showQuickJumper={false}\r\n          current={currentPage}\r\n          total={totalUsersCount}\r\n          onChange={onPageChanged}\r\n        />}\r\n      <SortSelect/>\r\n    </div>\r\n    <UsersList/>\r\n  </div>;\r\n}));\r\n","import { useEffect, useRef, useState } from 'react';\r\n\r\nexport const useStickyRef = () => {\r\n  const stickyRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [isSticky, setIsSticky] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const scrollCallback = () => {\r\n      if (stickyRef) {\r\n        const windowTop = window.pageYOffset;\r\n        const { top } = stickyRef.current!.getBoundingClientRect();\r\n        if (windowTop > top) setIsSticky(true);\r\n        else setIsSticky(false);\r\n      }\r\n    };\r\n    window.addEventListener('scroll', scrollCallback);\r\n    return () => {\r\n      window.removeEventListener('scroll', scrollCallback);\r\n    };\r\n  });\r\n\r\n  return { stickyRef, isSticky };\r\n};","import { useEffect, useState } from 'react';\r\n\r\nexport const useDebounceValue = <T>(value: T, delay: number = 1000) => {\r\n  const [state, setState] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setState(value);\r\n    }, delay);\r\n    return () => {\r\n      clearTimeout(timeout);\r\n    };\r\n  }, [delay, value]);\r\n\r\n  return state;\r\n};","import {FC} from 'react';\r\nimport {Navigate} from 'react-router-dom';\r\nimport {useAppSelector} from '../bll/hooks';\r\n\r\nexport function WithAuthRedirect<T>(Component: FC<T>) {\r\n    function RedirectComponent(props: T) {\r\n        const {isAuth} = useAppSelector(state => state.auth)\r\n        if (!isAuth) return <Navigate to={'/login'}/>\r\n        return <Component {...props}/>\r\n    }\r\n    return RedirectComponent;\r\n}"],"names":["children","restProps","InnerPreloader","className","s","src","innerLoader","alt","usersData","state","usersPage","UserItem","u","dispatch","useAppDispatch","isLoading","useAppSelector","isFollowing","some","id","to","photos","small","userPhoto","name","status","CommonButton","disabled","loading","onClick","toggleFollow","userID","isFollowed","followed","UsersList","memo","users","isFetching","map","pageSizeFilterValues","SortSelect","useSearchParams","search","setParams","count","Number","get","selectOptions","size","value","label","suffixIcon","CaretDownOutlined","defaultValue","onChange","set","String","options","WithAuthRedirect","totalUsersCount","currentPage","pageSize","stickyRef","useRef","useState","isSticky","setIsSticky","useEffect","scrollCallback","windowTop","window","pageYOffset","top","current","getBoundingClientRect","addEventListener","removeEventListener","useStickyRef","term","setTerm","debouncedValue","delay","setState","timeout","setTimeout","clearTimeout","useDebounceValue","trim","delete","fetchUsers","clearUsersData","c","ref","placeholder","e","currentTarget","type","showLessItems","showSizeChanger","showQuickJumper","total","Component","props","auth","isAuth"],"sourceRoot":""}